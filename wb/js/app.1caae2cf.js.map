{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/Diagram.vue?af2a","webpack:///./src/assets/afm.jpg","webpack:///./src/App.vue?7fbe","webpack:///./src/App.vue","webpack:///./src/components/Diagram.vue","webpack:///./src/diagram.ts","webpack:///./src/engine.ts","webpack:///./src/configs/hbkhz.ts","webpack:///./src/components/Diagram.vue?87d6","webpack:///./src/components/Diagram.vue?b40c","webpack:///./src/App.vue?3acc","webpack:///./src/App.vue?dfb6","webpack:///./src/main.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","class","href","width","config","inputs","input","for","scalars","id","placeholder","height","onclick","ondown","points","v","k","cx","x","cy","y","lines","x1","start","y1","x2","end","y2","texts","pos","text-anchor","font-size","text","toFixed","JSON","stringify","rows","cols","this","point","vec","dot","a","Vec2","scale","Math","sqrt","line","unit","minus","plus","precision","Point","delta","normalize","Line","fromConfig","scalar","Result","undefined","range","ic","context","Interpolator","params","run","resolveScalar","offset","reduce","b","Sum","map","factor","Scale","projectLine","intersectLine","projectee","intersector","projected","projectOnto","u","by","Intersector","resolvePoint","orThrow","val","Error","evaluateItem","type","runConfig","items","forEach","res","initial","hbkhz","console","log","down","event","e","target","rect","getBoundingClientRect","clientX","left","clientY","top","up","lenSquared","evaluate","render","__scopeId","components","Diagram","mount"],"mappings":"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","file":"js/app.1caae2cf.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Diagram.vue?vue&type=style&index=0&id=650c866f&scoped=true&lang=scss\"","module.exports = __webpack_public_path__ + \"img/afm.10bd558e.jpg\";","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./App.vue?vue&type=style&index=0&lang=scss\"","<template>\n  <Diagram />\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component';\nimport Diagram from './components/Diagram.vue';\n\n@Options({\n  components: {\n    Diagram,\n  },\n})\nexport default class App extends Vue {}\n</script>\n\n<style lang=\"scss\">\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n</style>\n","<template>\n  <div class=\"noprint\">\n    <h1>Inputs</h1>\n    <div v-for=\"input in config.inputs\" :key=\"input.name\">\n      <label :for=\"input.name\">{{input.name}}</label>\n      <input\n          v-model.number=\"scalars[input.name]\"\n          :id=\"input.name\"\n          :placeholder=\"input.name\" />\n    </div>\n  </div>\n  <svg width=\"1080\" height=\"1531\" @click=\"onclick\" @mousedown=\"ondown\">\n    <image href=\"./../assets/afm.jpg\" width=1080 />\n    <circle v-for=\"(v, k) in result.points\"\n        :key=\"k\"\n        :cx=\"v.x\" :cy=\"v.y\" r=\"5\" />\n    <line v-for=\"(v, k) in result.lines\"\n        :key=\"k\"\n        :x1=\"v.start.x\" :y1=\"v.start.y\"\n        :x2=\"v.end.x\" :y2=\"v.end.y\" />\n    <text v-for=\"(v, k) in result.texts\"\n        :key=\"k\"\n        :x=\"v.pos.x\" :y=\"v.pos.y\"\n        text-anchor=\"middle\"\n        font-size=\"26\">{{ v.text?.toFixed(0) }}</text>\n  </svg>\n  <div class=\"noprint\">\n    <textarea :value=\"JSON.stringify(result, null, 2)\"\n      rows=\"50\" cols=80 />\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component';\n\nimport { Line, Point } from '@/diagram'\nimport { Engine } from '@/engine'\nimport { Engine as EngineConfig } from '@/config'\nimport hbkhz from '@/configs/hbkhz'\n\n@Options({\n})\nexport default class Diagram extends Vue {\n  config: EngineConfig = hbkhz;\n\n  scalars = (() => {\n    const s: {[name: string]: number} = {}\n    this.config.inputs.forEach((input) => {\n      s[input.name] = input.initial;\n    });\n    console.log(s);\n    return s;\n  })();\n\n  down: Point | null = null\n\n  get result() {\n    try {\n      return new Engine(this.config).evaluate(this.scalars);\n    } catch (e) {\n      console.log(e);\n      return {scalars: [], points: [], lines: []};\n    }\n  }\n\n  onclick(event: MouseEvent) { // eslint-disable-line class-methods-use-this\n    const e = event.target as HTMLElement & SVGElement;\n    const rect = e.getBoundingClientRect();\n    const x = event.clientX - rect.left;\n    const y = event.clientY - rect.top;\n    const up = new Point(x, y);\n    const { down } = this;\n    if (down === null || up.minus(down).lenSquared() < 2) {\n      console.log(up.toFixed(1));\n    } else {\n      console.log(new Line(down, up).toFixed(1));\n    }\n  }\n\n  ondown(event: MouseEvent) { // eslint-disable-line class-methods-use-this\n    const e = event.target as HTMLElement & SVGElement;\n    const rect = e.getBoundingClientRect();\n    const x = event.clientX - rect.left;\n    const y = event.clientY - rect.top;\n    this.down = new Point(x, y);\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped lang=\"scss\">\nh3 {\n  margin: 40px 0 0;\n}\nul {\n  list-style-type: none;\n  padding: 0;\n}\nli {\n  display: inline-block;\n  margin: 0 10px;\n}\na {\n  color: #42b983;\n}\nsvg line {\n  stroke: red;\n}\nsvg circle {\n  stroke: blue;\n  stroke-width: 3px;\n  fill: none;\n}\nsvg {\n  background-color: lightgrey;\n}\nsvg text {\n  fill: red;\n}\n@media print {\n  .noprint {\n    display: none;\n  }\n  svg {\n    zoom: 0.60;\n  }\n}\n</style>\n","import * as config from '@/config'\n\nclass Vec2 {\n  x: number;\n\n  y: number;\n\n  constructor(x: number, y: number) {\n    this.x = x;\n    this.y = y;\n  }\n\n  plus(point: Point): Point {\n    return new Point(point.x + this.x, point.y + this.y);\n  }\n\n  dot(vec: Vec2): number {\n    return this.x * vec.x + this.y * vec.y;\n  }\n\n  lenSquared(): number {\n    return this.dot(this);\n  }\n\n  scale(a: number): Vec2 {\n    return new Vec2(a * this.x, a * this.y);\n  }\n\n  normalize(): Vec2 {\n    return this.scale(1 / Math.sqrt(this.dot(this)));\n  }\n}\n\nexport class Point {\n  x: number;\n\n  y: number;\n\n  constructor(x: number, y: number) {\n    this.x = x;\n    this.y = y;\n  }\n\n  projectOnto(line: Line): Point {\n    return line.unit.scale(this.minus(line.start).dot(line.unit)).plus(line.start);\n  }\n\n  minus(point: Point): Vec2 {\n    return new Vec2(this.x - point.x, this.y - point.y);\n  }\n\n  toFixed(precision: number): string {\n    return `{x: ${this.x.toFixed(precision)}, y: ${this.y.toFixed(precision)}}`\n  }\n\n  static fromConfig(c: config.Point): Point {\n    return new Point(c.x, c.y);\n  }\n}\n\nexport class Line {\n  start: Point;\n\n  end: Point;\n\n  delta: Vec2;\n\n  unit: Vec2;\n\n  constructor(start: Point, end: Point) {\n    this.start = start;\n    this.end = end;\n    this.delta = end.minus(start);\n    this.unit = this.delta.normalize();\n  }\n\n  toFixed(precision: number): string {\n    return `{start: ${this.start.toFixed(precision)}, end: ${this.end.toFixed(precision)}}`\n  }\n\n  static fromConfig(c: config.Line): Line {\n    return new Line(Point.fromConfig(c.start), Point.fromConfig(c.end));\n  }\n}\n\nexport class Result {\n  readonly scalar?: number;\n\n  readonly point?: Point;\n\n  readonly lines: Line[];\n\n  private constructor(scalar: number | undefined, point: Point | undefined, lines: Line[]) {\n    this.scalar = scalar;\n    this.point = point;\n    this.lines = lines;\n  }\n\n  static scalar(scalar: number, lines: Line[] = []): Result {\n    return new Result(scalar, undefined, lines);\n  }\n\n  static point(point: Point, lines: Line[] = []): Result {\n    return new Result(undefined, point, lines);\n  }\n}\n\nexport interface ItemContext {\n  resolveScalar: (name: string) => number\n  resolvePoint: (name: string) => Point\n}\n\nexport class Interpolator {\n  name: string;\n\n  line: Line;\n\n  range: [number, number];\n\n  constructor(name: string, line: Line, range: [number, number]) {\n    this.name = name;\n    this.line = line;\n    this.range = range;\n  }\n\n  run(v: number): Result {\n    const t = (v - this.range[0]) / (this.range[1] - this.range[0]);\n    const p = this.line.delta.scale(t).plus(this.line.start);\n    return Result.point(p, []);\n  }\n\n  static runConfig(ic: config.Interpolator, context: ItemContext): Result {\n    return new Interpolator(\n            ic.name,\n            Line.fromConfig(ic.params.line),\n            ic.params.range).run(context.resolveScalar(ic.inputs.v));\n  }\n}\n\nexport class Sum {\n  name: string;\n\n  offset: number;\n\n  constructor(name: string, offset: number) {\n    this.name = name;\n    this.offset = offset;\n  }\n\n  run(inputs: number[]): Result {\n    return Result.scalar(inputs.reduce((a, b) => a + b, this.offset), []);\n  }\n\n  static runConfig(ic: config.Sum, context: ItemContext): Result {\n    return new Sum(ic.name, ic.params.offset).run(\n      ic.inputs.map(context.resolveScalar)\n    );\n  }\n}\n\nexport class Scale {\n  name: string;\n\n  factor: number;\n\n  constructor(name: string, factor: number) {\n    this.name = name;\n    this.factor = factor;\n  }\n\n  run(v: number): Result {\n    return Result.scalar(this.factor * v, []);\n  }\n\n  static runConfig(ic: config.Scale, context: ItemContext): Result {\n    return new Scale(ic.name, ic.params.factor).run(\n      context.resolveScalar(ic.input)\n    );\n  }\n}\n\nexport class Intersector {\n\n  name: string;\n\n  projectLine: Line;\n\n  intersectLine: Line;\n\n  constructor(name: string, projectLine: Line, intersectLine: Line) {\n    this.name = name;\n    this.projectLine = projectLine;\n    this.intersectLine = intersectLine;\n  }\n\n  run(projectee: Point, intersector: Point): Result {\n    const projected = projectee.projectOnto(this.projectLine);\n    const b = intersector.minus(projected);\n    const u = this.projectLine.delta;\n    const v = this.intersectLine.delta;\n    const k = -u.y + u.x * v.y / v.x;\n    const by = b.y - b.x * v.y / v.x;\n    const a = (b.x - by * (-u.x / k)) / v.x;\n\n    const p = v.scale(a).plus(projected)\n\n    return Result.point(p, [\n      new Line(projectee, projected),\n      new Line(projected, p),\n      new Line(intersector, p),\n      ]);\n  }\n\n  static runConfig(ic: config.Intersector, context: ItemContext): Result {\n    return new Intersector(\n            ic.name,\n            Line.fromConfig(ic.params.projectLine),\n            Line.fromConfig(ic.params.intersectLine)\n        ).run(\n            context.resolvePoint(ic.inputs.projectee),\n            context.resolvePoint(ic.inputs.intersector));\n  }\n}\n\n","import * as configModule from '@/config'\nimport { Point, Line, Interpolator, Intersector, Result as ItemResult, Scale, Sum } from '@/diagram'\n\nexport interface Result {\n  scalars: {[key: string]: number},\n  points: {[key: string]: Point},\n  lines: Line[],\n  texts: TextResult[],\n}\n\ninterface TextResult {\n  text: number,\n  pos: Point,\n}\n\nexport class Engine {\n  config: configModule.Engine;\n\n  constructor(config: configModule.Engine) {\n    this.config = config;\n  }\n\n  evaluate(inputs: {[key: string]: number}): Result {\n    const scalars = { ...inputs };\n    const points: {[key: string]: Point} = {};\n    const lines: Line[] = [];\n    const texts: TextResult[] = [];\n\n    const orThrow = <T,>(name: string, val: T) => {\n      if ((val ?? null) === null) {\n        throw new Error(`Unknown name: ${name}`);\n      }\n      return val;\n    }\n\n    const context = {\n      resolveScalar: (name: string) => orThrow(name, scalars[name]),\n      resolvePoint: (name: string) => orThrow(name, points[name]),\n    }\n\n    function evaluateItem(ic: configModule.Item): ItemResult {\n      switch(ic.type) {\n        case \"interpolator\":\n          return Interpolator.runConfig(ic, context);\n        case \"intersector\":\n          return Intersector.runConfig(ic, context);\n        case \"sum\":\n          return Sum.runConfig(ic, context);\n        case \"scale\":\n          return Scale.runConfig(ic, context);\n        default:\n          throw new Error(`Unknown type: ${ic}`)\n      }\n\n    }\n\n    this.config.items.forEach((ic) => {\n      const res = evaluateItem(ic);\n      if (res.point !== undefined) {\n        points[ic.name] = res.point;\n      }\n      if (res.scalar !== undefined) {\n        scalars[ic.name] = res.scalar;\n      }\n      lines.push(...res.lines);\n    });\n\n    this.config.texts.forEach((ic) => {\n      texts.push({\n        text: context.resolveScalar(ic.name),\n        pos: Point.fromConfig(ic.pos),\n      });\n    });\n\n    return {\n      scalars,\n      points,\n      lines,\n      texts,\n    };\n  }\n}\n","import * as config from '@/config';\n\nconst c: config.Engine = {\n    inputs: [\n      {\n        type: 'scalar',\n        name: 'EmptyMoment',\n        initial: 240.04,\n      },\n      {\n        type: 'scalar',\n        name: 'EmptyWeight',\n        initial: 642.72,\n      },\n      {\n        type: 'scalar',\n        name: 'FrontSeatsWeight',\n        initial: 160,\n      },\n      {\n        type: 'scalar',\n        name: 'RearSeatsWeight',\n        initial: 10,\n      },\n      {\n        type: 'scalar',\n        name: 'MainTankLitres',\n        initial: 110,\n      },\n      {\n        type: 'scalar',\n        name: 'OptionalTankLitres',\n        initial: 0,\n      },\n      {\n        type: 'scalar',\n        name: 'BaggagesWeight',\n        initial: 10,\n      },\n    ],\n    items: [\n      {\n        type: 'interpolator',\n        name: 'EmptyMomentPoint',\n        params: {\n          line: {start: {x: 409.7, y: 330.0}, end: {x: 825.7, y: 328.1}},\n          range: [100, 600],\n        },\n        inputs: {\n          v: 'EmptyMoment'\n        },\n      },\n      {\n        type: 'interpolator',\n        name: 'FrontSeatsMoment',\n        params: {\n          line: {start: {x: 410.8, y: 330.0}, end: {x: 409.8, y: 498.0}},\n          range: [0, 200],\n        },\n        inputs: {\n          v: 'FrontSeatsWeight'\n        },\n      },\n      {\n        type: 'intersector',\n        name: 'PlusFrontSeatsMoment',\n        params: {\n          projectLine: {start: {x: 409.7, y: 330.0}, end: {x: 865.7, y: 326.0}},\n          intersectLine: {start: {x: 535.7, y: 329.7}, end: {x: 604.7, y: 497.7}},\n        },\n        inputs: {\n          projectee: 'EmptyMomentPoint',\n          intersector: 'FrontSeatsMoment',\n        },\n      },\n      {\n        type: 'interpolator',\n        name: 'RearSeatsPoint',\n        params: {\n          line: {start: {x: 410.3, y: 509.3}, end: {x: 410.3, y: 676.3}},\n          range: [0, 200],\n        },\n        inputs: {\n          v: 'RearSeatsWeight'\n        },\n      },\n      {\n        type: 'intersector',\n        name: 'PlusRearSeatsMoment',\n        params: {\n          projectLine: {start: {x: 411.3, y: 509.3}, end: {x: 827.3, y: 509.3}},\n          intersectLine: {start: {x: 438.3, y: 510.3}, end: {x: 638.3, y: 675.3}},\n        },\n        inputs: {\n          projectee: 'PlusFrontSeatsMoment',\n          intersector: 'RearSeatsPoint',\n        },\n      },\n      {\n        type: 'interpolator',\n        name: 'MainTankPoint',\n        params: {\n          line: {start: {x: 412.7, y: 687.8}, end: {x: 412.7, y: 838.8}},\n          range: [0, 110],\n        },\n        inputs: {\n          v: 'MainTankLitres'\n        },\n      },\n      {\n        type: 'intersector',\n        name: 'PlusMainTankMoment',\n        params: {\n          projectLine: {start: {x: 411.3, y: 687.3}, end: {x: 866.5, y: 687.3}},\n          intersectLine: {start: {x: 561.1, y: 689.5}, end: {x: 637.1, y: 838.5}},\n        },\n        inputs: {\n          projectee: 'PlusRearSeatsMoment',\n          intersector: 'MainTankPoint',\n        },\n      },\n      {\n        type: 'interpolator',\n        name: 'OptionalTankPoint',\n        params: {\n          line: {start: {x: 412.1, y: 854.6}, end: {x: 411.1, y: 925.6}},\n          range: [0, 50],\n        },\n        inputs: {\n          v: 'OptionalTankLitres'\n        },\n      },\n      {\n        type: 'intersector',\n        name: 'PlusOptionalTankMoment',\n        params: {\n          projectLine: {start: {x: 412.1, y: 853.5}, end: {x: 867.1, y: 852.5}},\n          intersectLine: {start: {x: 598.1, y: 853.5}, end: {x: 647.1, y: 923.5}},\n        },\n        inputs: {\n          projectee: 'PlusMainTankMoment',\n          intersector: 'OptionalTankPoint',\n        },\n      },\n      {\n        type: 'interpolator',\n        name: 'BaggagesPoint',\n        params: {\n          line: {start: {x: 412.4, y: 938.2}, end: {x: 412.4, y: 1023.2}},\n          range: [0, 60],\n        },\n        inputs: {\n          v: 'BaggagesWeight'\n        },\n      },\n      {\n        type: 'intersector',\n        name: 'PlusBaggagesMoment',\n        params: {\n          projectLine: {start: {x: 412.1, y: 938.3}, end: {x: 747.1, y: 938.3}},\n          intersectLine: {start: {x: 536.1, y: 939.3}, end: {x: 634.1, y: 1022.3}},\n        },\n        inputs: {\n          projectee: 'PlusOptionalTankMoment',\n          intersector: 'BaggagesPoint',\n        },\n      },\n      {\n        type: 'intersector',\n        name: 'EmptyTankPlusBaggagesMoment',\n        params: {\n          projectLine: {start: {x: 412.1, y: 938.3}, end: {x: 747.1, y: 938.3}},\n          intersectLine: {start: {x: 536.1, y: 939.3}, end: {x: 634.1, y: 1022.3}},\n        },\n        inputs: {\n          projectee: 'PlusRearSeatsMoment',\n          intersector: 'BaggagesPoint',\n        },\n      },\n      {\n        type: 'scale',\n        name: 'MainTankWeight',\n        input: 'MainTankLitres',\n        params: {\n          factor: 0.72,\n        }\n      },\n      {\n        type: 'scale',\n        name: 'OptionalTankWeight',\n        input: 'OptionalTankLitres',\n        params: {\n          factor: 0.72,\n        }\n      },\n      {\n        type: 'sum',\n        name: 'TotalWeight',\n        inputs: [\n          'EmptyWeight',\n          'FrontSeatsWeight',\n          'RearSeatsWeight',\n          'MainTankWeight',\n          'OptionalTankWeight',\n          'BaggagesWeight',\n        ],\n        params: {\n          offset: 0,\n        }\n      },\n      {\n        type: 'sum',\n        name: 'TotalWeightEmptyTank',\n        inputs: [\n          'EmptyWeight',\n          'FrontSeatsWeight',\n          'RearSeatsWeight',\n          'BaggagesWeight',\n        ],\n        params: {\n          offset: 0,\n        }\n      },\n      {\n        type: 'interpolator',\n        name: 'TotalWeightPoint',\n        params: {\n          line: {start: {x: 414.6, y: 1045.4}, end: {x: 414.6, y: 1287.4}},\n          range: [1000, 650],\n        },\n        inputs: {\n          v: 'TotalWeight'\n        },\n      },\n      {\n        type: 'intersector',\n        name: 'TotalMoment',\n        params: {\n          projectLine: {start: {x: 414.3, y: 1045.4}, end: {x: 869.3, y: 1042.4}},\n          intersectLine: {start: {x: 829.3, y: 1044.4}, end: {x: 831.3, y: 1285.4}},\n        },\n        inputs: {\n          projectee: 'PlusBaggagesMoment',\n          intersector: 'TotalWeightPoint',\n        },\n      },\n      {\n        type: 'interpolator',\n        name: 'TotalWeightEmptyTankPoint',\n        params: {\n          line: {start: {x: 414.6, y: 1045.4}, end: {x: 414.6, y: 1287.4}},\n          range: [1000, 650],\n        },\n        inputs: {\n          v: 'TotalWeightEmptyTank'\n        },\n      },\n      {\n        type: 'intersector',\n        name: 'TotalMomentEmptyTank',\n        params: {\n          projectLine: {start: {x: 414.3, y: 1045.4}, end: {x: 869.3, y: 1042.4}},\n          intersectLine: {start: {x: 829.3, y: 1044.4}, end: {x: 831.3, y: 1285.4}},\n        },\n        inputs: {\n          projectee: 'EmptyTankPlusBaggagesMoment',\n          intersector: 'TotalWeightEmptyTankPoint',\n        },\n      },\n    ],\n    texts: [\n      {\n        name: 'EmptyMoment',\n        pos: {x: 618.6, y: 248.9},\n      },\n      {\n        name: 'EmptyWeight',\n        pos: {x: 131.6, y: 323.9},\n      },\n      {\n        name: 'FrontSeatsWeight',\n        pos: {x: 133.6, y: 446.9},\n      },\n      {\n        name: 'RearSeatsWeight',\n        pos: {x: 133.6, y: 616.4},\n      },\n      {\n        name: 'MainTankWeight',\n        pos: {x: 135.6, y: 778.3},\n      },\n      {\n        name: 'MainTankLitres',\n        pos: {x: 330.6, y: 755.8},\n      },\n      {\n        name: 'OptionalTankWeight',\n        pos: {x: 136.6, y: 898.2},\n      },\n      {\n        name: 'OptionalTankLitres',\n        pos: {x: 330.6, y: 911.8},\n      },\n      {\n        name: 'BaggagesWeight',\n        pos: {x: 136.6, y: 1006.0},\n      },\n      {\n        name: 'TotalWeight',\n        pos: {x: 139.6, y: 1286.0},\n      },\n      {\n        name: 'TotalWeightEmptyTank',\n        pos: {x: 139.6, y: 1319},\n      },\n    ],\n  };\n\nexport default c;\n","\nimport { Options, Vue } from 'vue-class-component';\n\nimport { Line, Point } from '@/diagram'\nimport { Engine } from '@/engine'\nimport { Engine as EngineConfig } from '@/config'\nimport hbkhz from '@/configs/hbkhz'\n\n@Options({\n})\nexport default class Diagram extends Vue {\n  config: EngineConfig = hbkhz;\n\n  scalars = (() => {\n    const s: {[name: string]: number} = {}\n    this.config.inputs.forEach((input) => {\n      s[input.name] = input.initial;\n    });\n    console.log(s);\n    return s;\n  })();\n\n  down: Point | null = null\n\n  get result() {\n    try {\n      return new Engine(this.config).evaluate(this.scalars);\n    } catch (e) {\n      console.log(e);\n      return {scalars: [], points: [], lines: []};\n    }\n  }\n\n  onclick(event: MouseEvent) { // eslint-disable-line class-methods-use-this\n    const e = event.target as HTMLElement & SVGElement;\n    const rect = e.getBoundingClientRect();\n    const x = event.clientX - rect.left;\n    const y = event.clientY - rect.top;\n    const up = new Point(x, y);\n    const { down } = this;\n    if (down === null || up.minus(down).lenSquared() < 2) {\n      console.log(up.toFixed(1));\n    } else {\n      console.log(new Line(down, up).toFixed(1));\n    }\n  }\n\n  ondown(event: MouseEvent) { // eslint-disable-line class-methods-use-this\n    const e = event.target as HTMLElement & SVGElement;\n    const rect = e.getBoundingClientRect();\n    const x = event.clientX - rect.left;\n    const y = event.clientY - rect.top;\n    this.down = new Point(x, y);\n  }\n}\n","import { render } from \"./Diagram.vue?vue&type=template&id=650c866f&scoped=true&bindings={}\"\nimport script from \"./Diagram.vue?vue&type=script&lang=ts\"\nexport * from \"./Diagram.vue?vue&type=script&lang=ts\"\n\nimport \"./Diagram.vue?vue&type=style&index=0&id=650c866f&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-650c866f\"\n\nexport default script","\nimport { Options, Vue } from 'vue-class-component';\nimport Diagram from './components/Diagram.vue';\n\n@Options({\n  components: {\n    Diagram,\n  },\n})\nexport default class App extends Vue {}\n","import { render } from \"./App.vue?vue&type=template&id=447c8af3&bindings={}\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&lang=scss\"\nscript.render = render\n\nexport default script","import { createApp } from 'vue';\nimport App from './App.vue';\n\ncreateApp(App).mount('#app');\n"],"sourceRoot":""}